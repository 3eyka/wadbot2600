#!/bin/bash

if [ $# -eq 0 ]; then
    echo "USAGE : ./wadbot [push | sentinel]"
    exit 0
fi
argument="$1"
if [ "$argument" = "push" ]; then
    echo "wadbot na blyat ski pushi zjinya"
elif [ "$argument" = "sentinel" ]; then
    echo "wadbot na blyat ya ore no [S A N T I N E R U]-sama"
else
    echo "USAGE : ./wadbot [push | sentinel]"
    exit 0
fi
echo "Prenom (don't forget les majuscules) :"
read prenom
echo "Nom (don't forget les majuscules) :"
read nom
echo "ASR [2, 3, 4, 5, 11, 12] :"
read asr_nbr
echo "commit message :"
read cummit
git config --global user.name "${prenom} ${nom}"
git config --global user.email "${prenom}.${nom}@ecole2600.com"
git config --global credential.helper store
fullpath="https://git.ecole2600.com/promo2026_RNCP35612/${prenom}.${nom}_asr-exos-${asr_nbr}-2025.git"
git clone $fullpath

cd "${prenom}.${nom}_asr-exos-${asr_nbr}-2025/"
curl https://sentinel.ecole2600.com/download/latest -o sentinel
chmod +x sentinel
git add .
git commit -m "${cummit}"
if [ "$argument" = "push" ]; then
    git push
elif [ "$argument" = "sentinel" ]; then
    ./sentinel
fi
cd ../
rm -rf "${prenom}.${nom}_asr-exos-${asr_nbr}-2025/"
rm -rf .gitconfig

echo "WADBOT COMPLETE."
